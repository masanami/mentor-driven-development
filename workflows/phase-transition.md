# フェーズ遷移ワークフロー

## 概要

メンター駆動開発における各フェーズ間の遷移は、プロジェクトの進行において重要な判断ポイントです。このドキュメントでは、フェーズ遷移の条件、プロセス、およびエージェント間の引き継ぎ方法を定義します。

## フェーズ遷移マップ

```
開始 → 要件定義 → マネジメント → 設計 → マネジメント → 実装 → マネジメント → テスト → マネジメント → デプロイ → 完了
            ↑            ↑            ↑            ↑            ↑
          進捗確認      進捗確認      進捗確認      進捗確認      進捗確認
```

**基本原則：**

- すべてのフェーズ遷移はマネジメントエージェントを経由
- マネジメントエージェントが進捗管理と品質確認を実施
- 各エージェントは直接的な引き継ぎは行わない

## フェーズ遷移の原則

### 1. 前進条件

- 完了基準を満たした場合のみ前進
- チェックリストによる確認
- メンティーの承認必須

### 2. 後退条件

- ブロッカー発生時は適切なフェーズへ後退
- 後退理由の記録
- 後退も学習機会として活用

## マネジメントエージェントによる進捗管理

### 進捗管理の方法

**1. プロジェクト状況ファイル（project-status.md）**

```markdown
# プロジェクト進捗管理

## 基本情報

- プロジェクト名: [プロジェクト名]
- 開始日: [日付]
- 現在フェーズ: [フェーズ名]
- 全体進捗: [完了したフェーズ] / [総フェーズ数]

## 各フェーズの状況

### 要件定義

- 状態: [未開始/進行中/完了/保留]
- 開始日: [日付]
- 完了日: [日付]
- 成果物:
    - requirements.md ✓
    - user-stories.md ✓
- 課題: なし
- 次回アクション: 設計フェーズへ移行

### 設計

- 状態: [未開始/進行中/完了/保留]
- 開始日: [日付]
- 完了日: [日付]
- 成果物:
    - architecture.md ○
    - api-spec.md ○
- 課題: なし
- 次回アクション: 実装フェーズへ移行

## 現在の課題

- 課題1: 詳細と対策
- 課題2: 詳細と対策

## 次回の予定

- 予定1: 詳細
- 予定2: 詳細
```

**2. 引き継ぎ事項管理**

- 各フェーズの完了時に成果物リストを作成
- 次フェーズに必要な情報を整理
- 未解決課題の追跡

**3. 品質チェックポイント**

- 各フェーズの完了基準確認
- 成果物の品質評価
- 次フェーズ開始可否の判断

## 各フェーズの遷移詳細

### 開始 → 要件定義 (Req_AGT)

**トリガー:**

- 新規プロジェクト要求
- 新機能要求
- 改善要求

**開始時のマネジメント初期化:**

1. プロジェクト状況ファイル作成
2. 初期評価とスコープ設定
3. 要件定義フェーズの開始
4. Req_AGTへの作業依頼

**進捗管理開始:**

- project-status.md 作成
- 全体計画の策定
- マイルストーン設定

### 要件定義完了 → マネジメント → 設計開始

**Req_AGTからマネジメントへの報告:**

- 要件定義作業完了報告
- 成果物の提出
- 課題・リスクの報告

**マネジメントの品質確認:**

- 機能要件文書化完了確認
- 非機能要件定義完了確認
- 受入基準確立確認
- 優先順位決定確認

**マネジメント作業:**

1. 進捗管理ファイル更新（要件定義完了）
2. 成果物の品質確認
3. 次フェーズ開始可否判断
4. Des_AGTへの作業指示書作成

**Des_AGTへの引き継ぎ準備:**

- 要件定義成果物の整理
- 設計時の重点ポイント明示
- 制約条件・優先順位の伝達

### 設計完了 → マネジメント → 実装開始

**Des_AGTからマネジメントへの報告:**

- 設計作業完了報告
- 設計書・仕様書の提出
- 実装時の注意事項報告

**マネジメントの品質確認:**

- アーキテクチャ定義完了確認
- 詳細設計完了確認
- タスク分割完了確認
- 技術スタック決定確認

**マネジメント作業:**

1. 進捗管理ファイル更新（設計完了）
2. 設計書の品質確認
3. 実装計画の策定
4. Imp_AGTへの作業指示書作成

**Imp_AGTへの引き継ぎ準備:**

- 設計書の整理と説明
- 実装優先順位の決定
- 開発標準・ガイドラインの提供

### 実装完了 → マネジメント → テスト開始

**Imp_AGTからマネジメントへの報告:**

- 実装作業完了報告
- ソースコード提出
- テスト準備状況報告

**マネジメントの品質確認:**

- 実装完了確認
- ユニットテスト通過確認
- コード品質確認
- ドキュメント更新確認

**マネジメント作業:**

1. 進捗管理ファイル更新（実装完了）
2. 成果物の品質確認
3. テスト計画の確認
4. Test_AGTへの作業指示書作成

**Test_AGTへの引き継ぎ準備:**

- テスト対象の整理
- テスト環境の準備確認
- テスト計画書の提供

## エラー時の遷移

### 要件不明による後退

**発生時の流れ:**

1. Imp_AGTが要件の曖昧さをマネジメントに報告
2. マネジメントが状況を評価し、後退を決定
3. 進捗管理ファイルに後退理由を記録
4. Req_AGTに要件明確化を指示
5. 完了後、必要に応じてDes_AGTで設計更新
6. 更新完了後、Imp_AGTに作業再開指示

### 設計問題による後退

**発生時の流れ:**

1. 実装・テスト中に設計問題をマネジメントに報告
2. マネジメントが問題の影響範囲を評価
3. 進捗管理ファイルに問題と対策を記録
4. Des_AGTに設計見直しを指示
5. 設計更新完了後、影響範囲の実装を再開

## 並行フェーズの管理

### フロントエンド/バックエンド並行開発

- 分岐点: 設計フェーズ完了後
- フロントエンド: UI実装、状態管理、API統合
- バックエンド: API実装、DB実装、認証
- 同期ポイント: API仕様確定、統合テスト

## フェーズ遷移の記録

### 遷移ログフォーマット

- タイムスタンプ
- 遷移元・遷移先
- 遷移種別（前進/後退）
- 遷移理由
- 品質ゲート通過状況
- 引き継ぎドキュメント
- 承認者

## 学習ポイントの活用

### マネジメントによる振り返り管理

**各フェーズ完了時:**

1. 該当エージェントから振り返り情報を収集
2. 進捗管理ファイルに学習事項を記録
3. 次フェーズへの改善点を反映
4. プロジェクト全体の知見として蓄積

**振り返り記録フォーマット:**

```markdown
## フェーズ振り返り: [フェーズ名]

### 良かった点

- [具体的な成功要因]

### 改善点

- [問題点と原因]
- [次回への対策]

### 学習事項

- [得られた知見]
- [他プロジェクトへの適用可能性]
```

## ベストプラクティス

### 1. 明確な完了基準

- 具体的で測定可能な基準
- 関係者間での合意
- 文書化とチェックリスト
- レビューと承認プロセス

### 2. 効果的な引き継ぎ

- 必要な情報の完全性
- 構造化されたドキュメント
- アクセス可能な保存場所
- 質問機会の確保と受領確認

### 3. 継続的改善

- 遷移時間の測定
- 後退頻度の追跡
- 成果物品質の評価
- 定期的なフィードバック収集

## まとめ

フェーズ遷移は、メンター駆動開発の要となるプロセスです。明確な遷移条件、適切な品質ゲート、効果的な引き継ぎにより、スムーズなプロジェクト進行と継続的な学習を実現します。各遷移ポイントを学習機会として活用し、プロセス全体の改善につなげることが重要です。
